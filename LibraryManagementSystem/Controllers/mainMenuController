using System;

public class MainMenuController
{
    private string accountType;
    private string username;
    private string password;
    private bool isLoggedIn;

    public MainMenuController()
    {
        // Initialize the controller with default values
        accountType = "Guest";
        username = "";
        password = "";
        isLoggedIn = false;
    }

    public void Login()
    {
        Console.WriteLine("Login:");

        if (isLoggedIn)
        {
            Console.WriteLine("You are already logged in.");
            return;
        }

        Console.Write("Enter your username: ");
        string inputUsername = Console.ReadLine();

        Console.Write("Enter your password: ");
        string inputPassword = Console.ReadLine();

        // Perform authentication logic (e.g., check against a database)
        bool isAuthenticated = AuthenticateUser(inputUsername, inputPassword);

        if (isAuthenticated)
        {
            username = inputUsername;
            isLoggedIn = true;
            Console.WriteLine($"Welcome, {username}! You are now logged in as {accountType}.");
        }
        else
        {
            Console.WriteLine("Invalid username or password. Login failed.");
        }
    }

    public void Register()
    {
        Console.WriteLine("Register:");

        if (isLoggedIn)
        {
            Console.WriteLine("You must log out before registering a new account.");
            return;
        }

        Console.Write("Enter your desired username: ");
        string newUsername = Console.ReadLine();

        Console.Write("Enter your desired password: ");
        string newPassword = Console.ReadLine();

        // Perform registration logic (e.g., store new account details in a database)
        // This is a simplified example; you should handle password hashing and validation
        accountType = "Registered User";
        username = newUsername;
        password = newPassword;
        isLoggedIn = true;

        Console.WriteLine($"Account registered successfully! Welcome, {username}!");
    }

    public void Logout()
    {
        Console.WriteLine("Logout:");

        if (!isLoggedIn)
        {
            Console.WriteLine("You are not currently logged in.");
            return;
        }

        // Perform logout logic (e.g., clear session, update database, etc.)
        accountType = "Guest";
        username = "";
        password = "";
        isLoggedIn = false;

        Console.WriteLine("Logout successful. You are now logged out.");
    }

    // Example authentication logic (replace with actual authentication logic)
    private bool AuthenticateUser(string inputUsername, string inputPassword)
    {
        // Replace this logic with actual authentication against a database or other source
        return username == inputUsername && password == inputPassword;
    }
}
